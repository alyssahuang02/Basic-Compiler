{% extends "layout.html" %}

{% block title %}
    Mentor Signup
{% endblock %}

{% block main %}
    {% if admin == 0 %}
        <h2>Please sign up for the current week's session. Thank you!</h2>
        <!--add the signup message: Sign Up for Week _ \n Date-->
        <form action="/" method="post" autocomplete="off">
            <div class="form-group">
                <input class="form-control" name="name" placeholder="Name" type="text">
                <input class="form-control" name="note" placeholder="Note (Optional)" type="text">
                <!-- <input class="form-control" name="week" placeholder="Week (for hard-coding, will remove later)" type="number" min="1"> -->
                <select class="form-control" name="week">
                    <option disabled selected value="">Week</option>
                    {% for week in roster.items() %}
                    <option value="{{ week[0] }}">Week {{ week[0] }}: {{ week[1][0][0] }} {{ week[1][0][1] }}, {{ week[1][0][2] }}</option>
                    {% endfor %}
                </select>
                <button class="btn btn-primary" type="submit">Submit</button>
            </div>
        </form>
    {% else %}
        <h1 class="cursive">Please update the current week's session info. Thank you!</h1>
        <form action="/" method="post" autocomplete="off">
            <div class="form-group">
                <input class="form-control" name="week" placeholder="Week Number" type="number" min='1'>
                <select class="form-control" name="month">
                    <option disabled selected value="">Month</option>
                    {% for month in ['January', 'February', 'March', 'April', 'May', 'June', 'July', 'August', 'September', 'October', 'November', 'December']%}
                    <option value="{{ month }}">{{ month }}</option>
                    {% endfor %}
                </select>
                <input class="form-control" name="day" placeholder="Day" type="number" min="1" max = "31">
                <select class="form-control" name="year">
                    <option disabled selected value="">Year</option>
                    <option value="2020">2020</option>
                    <option value="2021">2021</option>
                </select>
                <input class="form-control" name="zoom-link" placeholder="Zoom Link" type="url">
            </div>
            <button class="btn btn-primary" type="submit">Update Information</button>
        </form>
    {% endif %}
    {% for week in roster.items() %}
        <div class = "week">
            <h3>Signups for Week {{ week[0] }}: {{ week[1][0][0] }} {{ week[1][0][1] }}, {{ week[1][0][2] }}</h3>
        </div>
        <table class="table table-striped">
        <thead>
            <tr>
                <th>Name</th>
                <th>Note</th>
                <th></th>
            </tr>
        </thead>
        <tbody>
            {% for signup in week[1][1:] %}
            <tr>
                <td>{{ signup[0] }} {{ signup[1] }}</td>
                <td>{{ signup[2] }}</td>
                {% if signup[3] %}
                <!-- <td><button type="button" class="close" aria-label="Close">
                    <span aria-hidden="true">&times;</span>
                </button> -->
                <td>
                <!-- <button type="submit" name="edit" class="btn btn-primary btn-sm">Edit</button> -->
                <form action="/" method="post" autocomplete="off">
                  <input type="hidden" name="week-delete" value='{{ week[0] }}'>
                  <input type="hidden" name="firstname-delete" value="{{ signup[0] }}">
                  <input type="hidden" name="lastname-delete" value="{{ signup[1] }}">
                  <button type="submit" name="delete" class="btn btn-primary btn-sm">Delete</button>
                </form>
                </td>
                {% endif %}
                </td>
            </tr>
            {% endfor %}
        </tbody>
    </table>
    {% endfor %}

{% endblock %}
